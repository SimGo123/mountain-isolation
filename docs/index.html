<!DOCTYPE HTML>
<html lang="de">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    <link rel="stylesheet" href="styles.css" type="text/css">
    <title>Isolation Demo</title>


    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>
    <script src="leaflet.geometryutil.js"></script>
    <script src="leaflet-arrowheads.js"></script>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <!-- <script src="wikiSearchScript.js"></script> -->
    <script src="isolationMapping.js"></script>
</head>

<body>
    <h1>Isolation Demo</h1>
    <p>
        Visualizing the isolation of mountains (=distance to next highest peak) according to Wiki.
    </p>
    <p>
        You can't enter a mountain below. 
        The mountain <a href="https://en.wikipedia.org/wiki/Hochvogel">Hochvogel</a> was already selected for you.
    </p>
    
    <form id="wikiSearchForm" onsubmit="return false;">
        <input type="text" id="wikiInput" value="Hochvogel" name="mountain" autocomplete="off" placeholder="Search Wiki for a Mountain..." readonly>
        <div id="results">
            <!-- <a>Zugspitze</a>
            <a>Hochvogel</a> -->
        </div>
    </form>
    <p></p>
    <input id="cbShowMarker" type="checkbox" checked="true" onclick="drawIsoList()"/> Show markers <br />
    <input id="cbShowCircle" type="checkbox" checked="true" onclick="drawIsoList()"/> Show isolation circles <br />
    <p></p>
    <div id="container">
        <div id="osm"></div>
        
        <table id="mountainResTable">
            <tr>
                <td>
                    <div class="loader inline-block" id="mountainLoader" style="visibility: hidden;"></div>
                </td>
                <td>
                    <span class="inline-block" id="mountainList"></span>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div id="errorBox" style="visibility: hidden;"></div>
                </td>
            </tr>
        </table>
        <div id="heightGraph" style="visibility: visible;">
    </div>
</body>

<script>
    demo = true;

    fetch('iso_list_example.json')
    .then(response => response.text())
    .then(text => {
      try {
        iso_list = JSON.parse(text);
        setupMap();
        drawIsoList(false);
      } catch (error) {
        console.error("Error parsing the file", error);
      }
    })
    .catch(error => console.error("Error fetching the file", error));
</script>

</html>
